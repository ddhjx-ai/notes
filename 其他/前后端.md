### 1.jsonp的实现原理：

**由于 dom 元素的src属性是支持跨域获取资源的；JSONP 就是利用 src 属性支持跨域获取资源。**

- 由于浏览器的安全性限制，不允许AJAX访问 协议不同、域名不同、端口号不同的 数据接口，浏览器认为这种访问不安全；
- 可以通过动态创建script标签的形式，把script标签的src属性，指向数据接口的地址，因为script标签不存在跨域限制，这种数据获取方式，称作JSONP（注意：根据JSONP的实现原理，知晓，JSONP只支持Get请求）；

**具体实现过程：**

- 先在客户端定义一个回调方法，预定义对数据的操作；
- 再把这个回调方法的名称，通过URL传参的形式，提交到服务器的数据接口；
- 服务器数据接口组织好要发送给客户端的数据，再拿着客户端传递过来的回调方法名称，拼接出一个调用这个方法的字符串，发送给客户端去解析执行；
- 客户端拿到服务器返回的字符串之后，当作Script脚本去解析执行，这样就能够拿到``JSONP``的数据了；

#### 跨域

1. **同源：**
       协议名、主机名、端口号都一样，可以称之为 同源

2. **跨域：**
       协议名、主机名、端口号有一个不一样，我们称之为 不同源；不同源的网站之间互相发送请求称为：跨域

   浏览器默认是限制了跨域访问的；虽然被限制了，但是在开发中不可避免的会出现跨域访问，
     为了解决跨域访问:

   1. cors:可以在服务端设置允许跨域许可即可 header('Access-Control-Allow-Origin:*'); （html5）才支持

   2. datatype:jsonp

### 2. http协议类

#### 2.1 http协议的主要特点：

- 简单快速
- 灵活：通过 http 协议可以完成不同数据类型的传输
- 无连接：连接一次就会断掉，不会保持连接
- 无状态：从 http 协议中，无法区分两次连接者的身份是否是同一个，也就是 http 不会保存不同连接者的不同状态

#### 2.2 http 报文组成部分

- 请求报文：请求行、请求头、空行、请求体
- 响应报文：状态行、响应头、空行、响应行

#### 2.3 http 方法

- get：获取资源
- post：传输资源
- put：更新资源
- delete：删除资源
- head：获得报文首部

#### 2.4 post和get区别

- GET 在浏览器回退时是无害的，而 POST 会再次提交请求
- GET 产生的 URL 地址可以被收藏，而 POST 不可以
- GET 请求会被浏览器主动缓存，而 POST 不会，除非手动设置
- GET 请求只能进行 URL 编码，而 POST 请求支持多种编码方式
- GET 请求参数会被完整保留在浏览器历史记录里面，而 POST 中的参数不会被保留
- GET 请求在 URL 中传送的参数是有长度限制的，而 POST 发送数据没有限制
- 对参数的数据类型， GET 只接受 ASCII 字符，而 POST 没有限制
- GET 比 POST更不安全，因为参数直接暴露在 URL 上，所以不能用来传递敏感信息
- GET 参数通过 URL 传递，POST 放在 Request body 中

### 3. 通信类

#### 3.1 同源策略及限制

同源策略限制从一个源加载的文档或脚本如何与来自另一个源的资源进行交互。这是一个用于隔离潜在恶意文件的关键的安全机制

在跨域情况下：

- Cookie、localStorage 和 indexDB 无法读取
- DOM 无法获取
- AJAX 请求不能发送

#### 3.2 前后端如何通信

- ajax
- websocket
- CORS

#### 3.3 跨域通信的几种方式

- JSONP
- Hash：hash改变不会刷新页面，也就是 url 中 # 后面的内容
- postMessage
- WebSocket
- CORS



### 4. 安全类

#### 4.1 CSRF

**CSRF：通常称为跨站请求伪造**，英文名 Cross-site request forgery

<img src="C:\Users\吴超\Desktop\笔记\图片\CSRF攻击原理.png" alt="CSRF攻击原理" style="zoom:50%;" />

**CSRF 防御措施**

- Token 验证
- Referer 验证
- 隐藏令牌

### 5.输入一个url请求到页面展示经历了哪些过程

1. 客户端获取URL - > DNS解析 
2. TCP连接
3.  发送HTTP请求 
4.  服务器处理请求并且返回HTTP报文 
5.  浏览器解析并且渲染页面 
6.  连接结束 ，TCP断开连接 

**具体步骤**

1. **DNS解析**
   1.  将浏览器输入的地址转换为唯一的ip地址
2.  **TCP连接** 
   1.  HTTP协议是以TPC协议作为传输层协议的 
3.  **HTTP请求** 
   1.  其实这部分又可以称为前端工程师眼中的 HTTP，它主要发生在客户端，发送HTTP请求的过程就是构建HTTP请求报文并通过TCP协议中发送到服务器指定端口。HTTP请求报文是由三部分组成：请求行，请求报头和请求正文 
   2.  常见的问题有： 
      1.  GET和POST请求有什么区别 
      2.  HTTP状态码 
      3.  301和302有什么区别 
         -  **301是永久重定向，而302是临时重定向**。  
4.  **服务器处理HTTP请求并且返回报文** 
   1.   响应报头、响应报文 
5.  **浏览器渲染解析页面**
   1.  浏览器是一个边解析边渲染的过程，首先浏览器解析HTML文件构成DOM树，然后解析CSS文件构建渲染树，等到渲染完成后，浏览器开始布局渲染树并将其绘制到屏幕上，这个过程比较复杂，涉及到两个概念，reflow（回流）和 repain（重绘）。DOM节点各个元素都是以盒模型的形式存在，这些都是需要浏览器去计算其位置和大小等，这个过程被称作为reflow，当浏览器的DOM属性确定下来之后，浏览器便开始绘制内容，这个过程被称为repain。页面在首次加载必然会经历reflow和repain，非常的消耗性能，而移动端的设备资源有限，有时候会造成页面卡顿，应当尽量减少。
   2. JS的解析是由浏览器中的JS解析引擎完成的。JS是单线程运行，也就是说，在同一个时间内只能做一件事，所有的任务都需要排队，前一个任务结束，后一个任务才能开始。但是又存在某些任务比较耗时，如IO读写等，所以需要一种机制可以先执行排在后面的任务，这就是：同步任务(synchronous)和异步任务(asynchronous)。JS的执行机制就可以看做是一个主线程加上一个任务队列(task queue)。同步任务就是放在主线程上执行的任务，异步任务是放在任务队列中的任务。所有的同步任务在主线程上执行，形成一个执行栈;异步任务有了运行结果就会在任务队列中放置一个事件；脚本运行时先依次运行执行栈，然后会从任务队列里提取事件，运行任务队列中的任务，这个过程是不断重复的，所以又叫做事件循环(Event loop)。

###  **6.永久重定向和临时重定向** 

-  **301** Moved Permanently 被请求的资源已永久移动到新位置，并且将来任何对此资源的引用都应该使用本响应返回的若干个URI之一。如果可能，拥有链接编辑功能的客户端应当自动把请求的地址修改为从服务器反馈回来的地址。除非额外指定，否则这个响应也是可缓存的。 
-  **302** Found 请求的资源现在临时从不同的URI响应请求。由于这样的重定向是临时的，客户端应当继续向原有地址发送以后的请求。只有在Cache-Control或Expires中进行了指定的情况下，这个响应才是可缓存的。 

 字面上的区别就是**301是永久重定向，而302是临时重定向**。 当然，他们之间也是有共同点的，就是用户都可以看到url替换为了一个新的，然后发出请求。 

​		**301比较常用的场景是使用域名跳转。**

　　比如，我们访问 **http**://www.baidu.com 会跳转到 **https**://www.baidu.com，发送请求之后，就会返回301状态码，然后返回一个location，提示新的地址，浏览器就会拿着这个新的地址去访问。 

　　**注意： 301请求是可以缓存的， 即通过看status code，可以发现后面写着from cache。**

　   **或者你把你的网页的名称从php修改为了html，这个过程中，也会发生永久重定向。**

#### 301重定向和302重定向的区别

- 302重定向只是暂时的重定向，搜索引擎会抓取新的内容而保留旧的地址，**因为服务器返回302，所以，搜索引擎认为新的网址是暂时的。**

- **而301重定向是永久的重定向，搜索引擎在抓取新的内容的同时也将旧的网址替换为了重定向之后的网址。**

　　

### 7.HTTP状态码 

| HTTP状态码分类（5种类型） |                                                |
| ------------------------- | ---------------------------------------------- |
| **分类**                  | **分类描述**                                   |
| 1**                       | 信息，服务器收到请求，需要请求者继续执行操作   |
| 2**                       | 成功，操作被成功接收并处理                     |
| 3**                       | 重定向，需要进一步的操作以完成请求             |
| 4**                       | 客户端错误，请求包含语法错误或无法完成请求     |
| 5**                       | 服务器错误，服务器在处理请求的过程中发生了错误 |

**HTTP状态码列表**

| **状态码** | **状态码英文名称**              | **中文描述**                                                 |
| ---------- | ------------------------------- | ------------------------------------------------------------ |
| 100        | Continue                        | 继续。[客户端](http://www.dreamdu.com/webbuild/client_vs_server/)应继续其请求 |
| 101        | Switching Protocols             | 切换协议。服务器根据客户端的请求切换协议。只能切换到更高级的协议，例如，切换到HTTP的新版本协议 |
|            |                                 |                                                              |
| 200        | OK                              | 请求成功。一般用于GET与POST请求                              |
| 201        | Created                         | 已创建。成功请求并创建了新的资源                             |
| 202        | Accepted                        | 已接受。已经接受请求，但未处理完成                           |
| 203        | Non-Authoritative Information   | 非授权信息。请求成功。但返回的meta信息不在原始的服务器，而是一个副本 |
| 204        | No Content                      | 无内容。服务器成功处理，但未返回内容。在未更新网页的情况下，可确保浏览器继续显示当前文档 |
| 205        | Reset Content                   | 重置内容。服务器处理成功，用户终端（例如：浏览器）应重置文档视图。可通过此返回码清除浏览器的表单域 |
| 206        | Partial Content                 | 部分内容。服务器成功处理了部分GET请求                        |
|            |                                 |                                                              |
| 300        | Multiple Choices                | 多种选择。请求的资源可包括多个位置，相应可返回一个资源特征与地址的列表用于用户终端（例如：浏览器）选择 |
| 301        | Moved Permanently               | 永久移动。请求的资源已被永久的移动到新URI，返回信息会包括新的URI，浏览器会自动定向到新URI。今后任何新的请求都应使用新的URI代替 |
| 302        | Found                           | 临时移动。与301类似。但资源只是临时被移动。客户端应继续使用原有URI |
| 303        | See Other                       | 查看其它地址。与301类似。使用GET和POST请求查看               |
| 304        | Not Modified                    | 未修改。所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。客户端通常会缓存访问过的资源，通过提供一个头信息指出客户端希望只返回在指定日期之后修改的资源 |
| 305        | Use Proxy                       | 使用代理。所请求的资源必须通过代理访问                       |
| 306        | Unused                          | 已经被废弃的HTTP状态码                                       |
| 307        | Temporary Redirect              | 临时重定向。与302类似。使用GET请求重定向                     |
|            |                                 |                                                              |
| 400        | Bad Request                     | 客户端请求的语法错误，服务器无法理解                         |
| 401        | Unauthorized                    | 请求要求用户的身份认证                                       |
| 402        | Payment Required                | 保留，将来使用                                               |
| 403        | Forbidden                       | 服务器理解请求客户端的请求，但是拒绝执行此请求               |
| 404        | Not Found                       | 服务器无法根据客户端的请求找到资源（网页）。通过此代码，网站设计人员可设置"您所请求的资源无法找到"的个性页面 |
| 405        | Method Not Allowed              | 客户端请求中的方法被禁止                                     |
| 406        | Not Acceptable                  | 服务器无法根据客户端请求的内容特性完成请求                   |
| 407        | Proxy Authentication Required   | 请求要求代理的身份认证，与401类似，但请求者应当使用代理进行授权 |
| 408        | Request Time-out                | 服务器等待客户端发送的请求时间过长，超时                     |
| 409        | Conflict                        | 服务器完成客户端的PUT请求是可能返回此代码，服务器处理请求时发生了冲突 |
| 410        | Gone                            | 客户端请求的资源已经不存在。410不同于404，如果资源以前有现在被永久删除了可使用410代码，网站设计人员可通过301代码指定资源的新位置 |
| 411        | Length Required                 | 服务器无法处理客户端发送的不带Content-Length的请求信息       |
| 412        | Precondition Failed             | 客户端请求信息的先决条件错误                                 |
| 413        | Request Entity Too Large        | 由于请求的实体过大，服务器无法处理，因此拒绝请求。为防止客户端的连续请求，服务器可能会关闭连接。如果只是服务器暂时无法处理，则会包含一个Retry-After的响应信息 |
| 414        | Request-URI Too Large           | 请求的URI过长（URI通常为网址），服务器无法处理               |
| 415        | Unsupported Media Type          | 服务器无法处理请求附带的媒体格式                             |
| 416        | Requested range not satisfiable | 客户端请求的范围无效                                         |
| 417        | Expectation Failed              | 服务器无法满足Expect的请求头信息                             |
|            |                                 |                                                              |
| 500        | Internal Server Error           | 服务器内部错误，无法完成请求                                 |
| 501        | Not Implemented                 | 服务器不支持请求的功能，无法完成请求                         |
| 502        | Bad Gateway                     | 充当网关或代理的服务器，从远端服务器接收到了一个无效的请求   |
| 503        | Service Unavailable             | 由于超载或系统维护，服务器暂时的无法处理客户端的请求。延时的长度可包含在服务器的Retry-After头信息中 |
| 504        | Gateway Time-out                | 充当网关或代理的服务器，未及时从远端服务器获取请求           |
| 505        | HTTP Version not supported      | 服务器不支持请求的HTTP协议的版本，无法完成处理               |